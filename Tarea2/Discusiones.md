# Arquitectura 1

| Aspecto             | Beneficio                                                                                                                                | Trade-off                                                                                                           |
| ------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| HTTP 302            | Permite rastrear cada click, lo que le otorga a la USM una analítica precisa.                                                            | Más carga en el servidor y una mayor latencia.                                                                      |
| gRPC logging        | Analítica estructurada y eficiente, tipificación fuerte, eficiencia.                                                                     | Mayor complejidad, requiere otro servicio y base de datos, lo cual aumenta los costos de mantención.                |
| Sin caching         | Los datos están 100% actualizados y ofrece mayor seguridad al evitar exponer datos sensibles que pudieran estar almacenados en la caché. | Escala peor en tráfico alto, ofrece una menor velocidad al usuario, y presenta más carga de trabajo en el servidor. |
| Sistema distribuido | Desacopla la responsabilidad al dividir las tareas en distintos módulos.                                                                 | Más despliegues, monitoreo, posibles fallas potenciales.                                                            |
# Arquitectura 2

| Aspecto       | Beneficio                                                                                                                 | Trade-off                                                                                                   |
| ------------- | ------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| HTTP 301      | Menos carga en el servidor y más rápido para el usuario, permite guardar la dirección en caché.                           | Pierde medición precisa de clics recurrentes al indicársele al usuario que la redirección es permanente.    |
| Caching       | Mejora la escalabilidad, y al considerar de que las URLs no cambian se beneficia de la reducción de carga en el servidor. | Los datos pueden quedar desactualizados, y los datos almacenados en caché pueden ser vulnerables a ataques. |
| Rate limiting | Ayuda a proteger ataques DDoS, y mejora la experiencia de usuario al evitar la saturación en eventos masivos.             | Existe la posibilidad de bloqueo injusto si se comparte IP con otros usuarios.                              |
| Diseño simple | Al haber menos servicios, se presentan menos fallas.                                                                      | Aunque, si ocurre un fallo, el sistema puede verse afectado a un nivel mayor.                               |
# Conclusiones
En el caso de que el negocio de la USM requiera la analítica detalla del acceso al sitio, es más recomendable la arquitectura 1. Es más adecuada al poder obtener un análisis en tiempo real mediante gRPC, y al carecer del uso de caching se mejora la seguridad del usuario al evitar mantener datos sensibles al alcance de atacantes. Sin embargo, se presenta una mayor carga en los servidores, requiere una mayor infraestructura, y una hay más complejidad operativa.

Ahora bien, si el objetivo es servir enlaces de forma masiva, estable, y rápida priorizando disponibilidad, menor consumo de recursos, y tolerancia a picos de tráfico, el ganador es la arquitectura 2. Además de los beneficios mencionados anteriormente, el hecho de utilizar un rate limiting ayuda a la seguridad y mejorar la disponibilidad en ocasiones como épocas de matrículas o eventos; sin embargo, no se puede obtener la analítica de forma precisa al estar utilizando caché y redirecciones permanentes.
